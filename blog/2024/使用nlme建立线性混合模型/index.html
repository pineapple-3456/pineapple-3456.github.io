<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>毕业论文笔记1｜使用nlme建立线性混合模型 | Haoyuan Tan</title> <meta name="author" content="Haoyuan Tan"> <meta name="description" content="使用nlme建立线性混合模型"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%8D%8D&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://pinapple-3456.github.io/blog/2024/%E4%BD%BF%E7%94%A8nlme%E5%BB%BA%E7%AB%8B%E7%BA%BF%E6%80%A7%E6%B7%B7%E5%90%88%E6%A8%A1%E5%9E%8B/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Haoyuan </span>Tan</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/publications/">publications</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/projects/">projects</a> </div> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">毕业论文笔记1｜使用nlme建立线性混合模型</h1> <p class="post-meta">December 29, 2024</p> <p class="post-tags"> <a href="/blog/2024"> <i class="fas fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/%E5%BF%83%E7%90%86%E5%AD%A6"> <i class="fas fa-hashtag fa-sm"></i> 心理学</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h1 id="线性混合模型介绍">线性混合模型介绍</h1> <p>社会科学研究中的数据经常具有层次结构，过去分析层次结构数据容易产生的一个问题是汇总偏差，即将不同组织的数据错误地纳入同一个模型中。例如对不同学校的学生的调查显示，学生的某种特质X可能会影响到学习成绩Y，然而X对Y的回归系数却不是恒定的，而是在不同学校间存在有统计意义的差异。线性混合模型的出现就是为了应对这种问题。应对的策略是允许X对Y的回归系数在一定范围内变化。</p> <p>考虑以上的以上的例子，使用普通的ols回归可以建立回归方程：</p> \[\begin{align} Y_i = \beta_0 + \beta_1X_i + e_i \end{align}\] <p>其中 \(i\) 代表第 \(i\) 个学生个体。</p> <p>混合模型可以允许回归系数在不同学校间有差异，注意(3)和(4)的因变量是(2)的回归系数：</p> \[\begin{align} &amp; Y_{ij} = \beta_{0j} + \beta_{1j}X_{ij} + r_{ij} \\ &amp; \beta_{0j} = \gamma_{00} + u_{0j} \\ &amp; \beta_{1j} = \gamma_{10} + u_{1j} \end{align}\] <p>其中 \(j\) 表示第 \(j\) 个学校， \(r_{ij}\) 表示学生水平的误差， \(u_{0j}\) 和 \(u_{1j}\) 表示学校水平在截距和斜率上的误差，即不同学校间截距和斜率的差异。我们将第一行的方程称为层1，代表学生水平，将后两行的方程称为层2，代表学校水平。</p> <p>如果 \(\beta_0\) 和 \(\beta_1\) 还能够被学校特征W预测，那么有</p> \[\begin{align} &amp; Y_{ij} = \beta_{0j} + \beta_{1j}X_{ij} + r_{ij} \\ &amp; \beta_{0j} = \gamma_{00} + \gamma_{01}W_{j} + u_{0j} \\ &amp; \beta_{1j} = \gamma_{10} + \gamma_{11}W_{j} + u_{1j} \end{align}\] <p>我们可以将混合模型进行合并：</p> \[\begin{align} Y_{ij} = \gamma_{00} + \gamma_{10}X_{ij} + \gamma_{01}W_{j} + \gamma_{11}X_{ij}W_{j} + u_{0j} + u_{1j}X_{ij} + r_{ij} \end{align}\] <p>对应的普通ols回归方程是一个包含X和W交互项的方程：</p> \[\begin{align} Y_i = \beta_0 + \beta_1X_i + \beta_2W_j + \beta_3X_iW_j+ e_i \end{align}\] <p>对比普通ols回归方程，可以发现二者的区别在于原本的误差项 \(e_i\) 变为 \(u_{0j}+u_{1j}X_{ij}+r_{ij}\)。实际上这正是线性混合模型与一般线性模型的主要区别：线性混合模型允许更加复杂的残差结构，这些残差依赖于 \(u_{0j}\) 和 \(u_{1j}\)，因此在各学校中是不同的。线性混合模型中，残差被称为随机效应，其中 \(r_{ij}\) 称为层1残差的随机效应， \(u_{0j}\) 称为截距的随机效应， \(u_{1j}\) 称为X的随机效应。相应地，固定效应则是合并模型(9)中的系数，其中 \(\gamma_{00}\) 是截距的固定效应， \(\gamma_{10}\) 是X的固定效应， \(\gamma_{01}\) 是W的固定效应， \(\gamma_{11}\) 是X和W交互项的固定效应。熟悉随机效应和固定效应的含义有助于理解nlme的公式设定和结果。</p> <p>对于固定效应，我们关注的是它的系数，而对于随机效应，我们关注随机效应的方差和协方差。层1随机效应的方差记为 \(\mathrm{Var}(r_{ij}) = \sigma^2\)，层2随机效应协方差记为：</p> \[\left.\mathrm{Var}\left[ \begin{array} {c}u_{0j} \\ \\ u_{1j} \end{array}\right.\right]= \begin{bmatrix} \tau_{00} &amp; \tau_{01} \\ \\ \tau_{10} &amp; \tau_{11} \end{bmatrix}\] <p>它们之后会被用来计算方差解释率和各随机效应之间的关系，在后面的实例中可以看到。</p> <h1 id="实例学生社会经济地位对数学成绩的影响">实例：学生社会经济地位对数学成绩的影响</h1> <p>数据来自刘红云<a href="http://crup.com.cn/Book/TextDetail?doi=371b74c6-6b77-4f96-9c81-a0acd521f5e9" rel="external nofollow noopener" target="_blank">高级心理统计</a>第十三章13-3.SAV。其中，我们需要用到的变量有：</p> <ol> <li>因变量：mathach学生的数学成绩</li> <li>自变量：ses社会经济地位</li> <li>学校编码：id</li> <li>学校特征：disclim学校纪律环境</li> </ol> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>library(haven) #读sav文件
library(nlme) #拟合线性混合模型

df &lt;- read_sav('/Users/tan/Downloads/高级心理统计/13第十三章 多层线性模型简介/13-3.SAV') #文件导入
</code></pre></div></div> <h2 id="零模型">零模型</h2> <p>线性混合模型的建模的一般程序是从简单到复杂，逐步加入变量。最简单的模型被称为零模型，可以为我们提供一些初步的信息，它在层1和层2都只包含截距：</p> \[\begin{align} &amp; Y_{ij}(mathach) = \beta_{0j} + r_{ij} \\ &amp; \beta_{0j} = \gamma_{00} + u_{0j} \\ \end{align}\] <p>合并模型为：</p> \[\begin{align} Y_{ij}(mathach) = \gamma_{00} + u_{0j} + r_{ij} \end{align}\] <p>零模型实际上是一个带随机效应的单因素方差分析模型。包含一个固定效应：</p> <ul> <li>\(\gamma_{00}\) 表示总均值</li> </ul> <p>两个随机效应：</p> <ul> <li>\(u_{0j}\) 代表学校间差异，方差为 \(\tau_{00}\)。</li> <li>\(r_{ij}\) 代表学生个体差异，方差为 \(\sigma^2\)。</li> </ul> <p>学校间差异和学生个体差异构成了总变异 \((\tau_{00}+\sigma^2)\)。</p> <p>计算程序为：</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hlm_null &lt;- lme(mathach ~ 1, random = ~1|id, data = df, method = 'ML')
summary(hlm_null)
</code></pre></div></div> <p>程序中lme函数中设置了四个参数。mathach ~ 1 表明固定部分只包含一个截距 \(\gamma_{00}\)， random = ~1|id 表明随机部分也只包含截距的随机效应 \(u_{0j}\)，依赖于学校id， data = df 表明数据来源， method = ‘ML’ 表明使用极大似然法进行估计。需要注意：</p> <p><strong>估计方法</strong> 线性混合模型一般使用极大似然法(ML)和受限极大似然法(REML)进行估计。ML能够为固定效应提供能准确的估计，REML能够为随机效应提供更准确的估计。多数统计软件默认使用REML估计，本例在原教材中呈现的结果也是使用REML得到的，但具体使用哪一种取决于研究目的。需要注意，如果要使用对数似然进行模型比较，则必须使用ML估计，否则对数似然是没有意义的。</p> <p><strong>缺失值处理</strong> 有缺失值时无法计算，可以在参数中加入 na.action = na.exclude，表明忽略缺失值。</p> <p>计算的结果为：</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Linear mixed-effects model fit by maximum likelihood
  Data: df 
       AIC      BIC    logLik
  47121.81 47142.45 -23557.91

Random effects:
 Formula: ~1 | id
        (Intercept) Residual
StdDev:    2.924631 6.256868

Fixed effects:  mathach ~ 1 
               Value Std.Error   DF  t-value p-value
(Intercept) 12.63707 0.2436341 7025 51.86905       0

Standardized Within-Group Residuals:
        Min          Q1         Med          Q3         Max 
-3.06261750 -0.75364533  0.02675559  0.76070101  2.74183819 

Number of Observations: 7185
Number of Groups: 160 
</code></pre></div></div> <p>结果首先给出了整个模型的信息准则AIC和BIC，越小代表拟合效果越好。logLik代表对数似然LL，越大代表拟合效果越好（随后我们要使用-2LL进行模型比较）。在随机部分，给出了两个随机效应的标准差，截距随机效应 \(u_{0j}\) 的标准差 \(\sqrt{\tau_{00}}\) 为2.924631，残差 \(r_{ij}\) 的标准差 \(\sigma\) 为6.256868。固定效应部分给出截距固定效应 \(\gamma_{00}\) 为12.63707。</p> <p>结果没有给出方差，可以使用标准差的平方来计算，也可以使用VarCorr()函数直接提取方差成分：</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>VarCorr(hlm_null)
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>id = pdLogChol(1) 
            Variance  StdDev  
(Intercept)  8.553464 2.924631
Residual    39.148400 6.256868
</code></pre></div></div> <p>表明残差方差 \(\sigma^2\) 为39.148400，截距方差 \(\tau_{00}\) 为8.553464。</p> <p><strong>ICC系数</strong> 零模型的一个重要作用是计算ICC系数。ICC系数是指组间方差对总方差的解释率： \(\tau_{00}/(\tau_{00}+\sigma^2)\)。ICC系数足够大，表明将模型分为学校和学生两个层次是合理的，一般认为ICC不应该低于0.059。可以提取方差来计算ICC系数：</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var_comp_null &lt;- VarCorr(hlm_null) #输出方差成分
var_null_l2 &lt;- as.numeric(var_comp_null['(Intercept)', 'Variance'])#提取组间方差
var_null_l1 &lt;- as.numeric(var_comp_null['Residual', 'Variance']) #提取组内方差
icc = var_null_l2/(var_null_l2 + var_null_l1) 
print(icc)
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 0.1793109
</code></pre></div></div> <p>或者直接使用reghelper包的ICC()函数来计算：</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>library(reghelper)
ICC(hlm_null)
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 0.1793109
</code></pre></div></div> <p>总而言之，零模型为我们提供了分层数据的初步信息：</p> <ol> <li>对总平均数的估计 \(\gamma_{00}\)</li> <li>学校间方差 \(\tau_{00}\)</li> <li>学生个体间方差 \(\sigma^2\)</li> <li>学校间方差对总方差的解释率 ICC系数</li> </ol> <h2 id="随机斜率模型">随机斜率模型</h2> <p>在零模型的基础上，使层1包含预测变量ses，并且允许ses的斜率带有随机效应，就构成了随机斜率模型：</p> \[\begin{align} &amp; Y_{ij}(mathach) = \beta_{0j} + \beta_{1j}X_{ij}(ses) + r_{ij} \\ &amp; \beta_{0j} = \gamma_{00} + u_{0j} \\ &amp; \beta_{1j} = \gamma_{10} + u_{1j} \end{align}\] <p>合并模型为：</p> \[\begin{align} Y_{ij}(mathach) = \gamma_{00} + \gamma_{10}X_{ij}(ses) + u_{0j} + u_{1j}X_{ij}(ses) + r_{ij} \\ \end{align}\] <p>包含两个固定效应：</p> <ul> <li>\(\gamma_{00}\) 表示控制ses后各学校的调整均值</li> <li>\(\gamma_{10}\) 表示各学校ses斜率的均值</li> </ul> <p>三个随机效应：</p> <ul> <li>\(u_{0j}\) 表示调整均值的学校间差异，方差为 \(\tau_{00}\)。</li> <li>\(u_{1j}\) 表示各学校间ses斜率的差异，方差为 \(\tau_{10}\)。</li> <li>\(r_{ij}\) 表示ses无法解释的学生个体差异，方差为 \(\sigma^2\)。</li> </ul> <p>计算程序为：</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hlm_radom_slope &lt;- lme(mathach ~ 1 + ses, random = ~1 + ses|id, data = df, method = 'ML')
summary(hlm_radom_slope)
</code></pre></div></div> <p>与零模型相比，固定部分中加入了预测变量ses，同时在随机部分中也加入了ses斜率的随机效应。参数估计同样使用极大似然法。需要注意：</p> <p><strong>自变量对中</strong> 对中是指将自变量减去其均值，使均值变为0。这是为了使截距变得有意义，自变量均值对应的回归预测值为因变量均值，因此均值为0时，截距就是因变量的均值。考虑上面的层1模型，当自变量对中后， \(\beta_{0j}\) 就是第j个学校学生成绩的均值。截距的意义在混合模型中是一个重要问题，尤其是当截距能被学校特征预测时，如果截距无法解释，那么截距预测变量的斜率也没有意义，因此对中是一个必要的步骤。对中有两种方式：以总均值对中和以组均值对中。本例中的自变量是预先进行过标准化的，可以看做以总均值对中。</p> <p>以总均值对中后，层1模型变为:</p> \[\begin{align} Y_{ij} = \beta_{0j} + \beta_{1j}(X_{ij}-\bar{X}_{..}) + r_{ij} \end{align}\] <p>当 \(X = \bar{X}_{.j}\) 时，带入能够得到因变量的组均值:</p> \[\begin{align} \beta_{0j} = \bar{Y}_{.j} - \beta_{1j}(X_{.j}-\bar{X}_{..}) \end{align}\] <p>是每个学校控制了自变量后的调整均值。如果希望在层1控制某些变量，再估计层2效应，那么应该选择以总均值对中，实际研究大部分是这种情况。</p> <p>以组均值对中后，层1模型变为：</p> \[\begin{align} Y_{ij} = \beta_{0j} + \beta_{1j}(X_{ij}-\bar{X}_{.j}) + r_{ij} \end{align}\] <p>当 \(X = \bar{X}_{.j}\) 时，带入能够得到因变量的组均值:</p> \[\begin{align} \beta_{0j} = \bar{Y}_{.j} \end{align}\] <p>这样就忽略了自变量的影响，是每个学校的未调整均值。以组均值对中适合于分离个人层次效应和构成效应。构成效应是指，当我们把自变量分为组均值 \(\bar{X}_{.j}\) 和个体差异 \((X_{ij}-\bar{X}_{.j})\) 两个部分时， \(\bar{X}_{.j}\) 的效应 \(\beta_b\) 和 \((X_{ij}-\bar{X}_{.j})\) 的效应 \(\beta_w\) 存在差异，导致相同的 \(X_{ij}\) 在 \(\bar{X}_{.j}\) 更高的组具有更大的效应。一般是由于组内所有个体有相似的特质，这种特质形成了一定的氛围，从而改变了个体的效应。例如，假设学生ses对数学成绩的影响具有构成效应，当某两个学校的学生具有相同ses时，处于平均ses更高的学校中的学生具有更高的数学成绩。自变量以组均值对中后，再将组均值加入层2作为截距的预测变量，组均值的系数 \(\gamma_{10}\) 即为构成效应。</p> <p>随机斜率模型的计算结果为：</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Linear mixed-effects model fit by maximum likelihood
  Data: df 
       AIC      BIC    logLik
  46648.47 46689.75 -23318.23

Random effects:
 Formula: ~ses | id
 Structure: General positive-definite, Log-Cholesky parametrization
            StdDev    Corr  
(Intercept) 2.1875031 (Intr)
ses         0.6311267 -0.113
Residual    6.0689007       

Fixed effects:  mathach ~ ses 
                Value Std.Error   DF  t-value p-value
(Intercept) 12.665586 0.1891248 7024 66.96947       0
ses          2.394936 0.1177038 7024 20.34713       0
 Correlation: 
    (Intr)
ses -0.046

Standardized Within-Group Residuals:
        Min          Q1         Med          Q3         Max 
-3.12298183 -0.73009458  0.02184146  0.75598096  2.94309203 

Number of Observations: 7185
Number of Groups: 160
</code></pre></div></div> <h3 id="待续">待续</h3> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/%E4%BF%A1%E5%BA%A6%E7%9A%84%E5%AE%9A%E4%B9%89%E4%BB%A5%E5%8F%8A%E7%94%A8%E4%BF%A1%E5%BA%A6%E8%BF%9B%E8%A1%8C%E5%81%87%E8%AE%BE%E6%A3%80%E9%AA%8C/">信度的定义以及用信度进行假设检验</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/%E7%BA%BF%E6%80%A7%E6%A8%A1%E5%9E%8B%E4%B8%ADR-r-%CE%B7-f-f-F%E7%9A%84%E5%85%B3%E7%B3%BB/">线性模型中R²、r、η²、f²、f、F的关系</a> </li> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2025 Haoyuan Tan. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>